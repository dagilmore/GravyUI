/* GravyUI - Written by Patrick Cason */
/* http://patrickcason.com */
/* Version 1.0 - 03-15-13 */

$(document).ready(function(){$(".progressBar span").hide();$(".progressBar").on("mouseenter",function(){$(this).find("span").stop(true,true).fadeIn(150)}).on("mouseleave",function(){$(this).find("span").stop(true,true).fadeOut(150)});$(".range:not(.vertical) .slide").on("mousedown",function(){var e=$(this);var t=e.parent().width();$(window).bind("mousemove",function(n){var r=e.parent().offset();var i=n.pageX-r.left;var s=i-8;if(s<=t&&s>=0)e.css("left",s);else if(s>t)e.css("left",t);else e.css("left",0);e.css("top",-6);$(window).bind("mouseup",function(){var n=Math.round(s/t*100);if(n>100)n=100;else if(n<0)n=0;e.css("left",n+"%");$(window).unbind("mousemove")})})});$(".range.vertical .slide").on("mousedown",function(){var e=$(this);var t=e.parent().height()-16;$(window).bind("mousemove",function(n){var r=e.parent().offset();var i=n.pageY-r.top;var s=i-8;if(s<=t&&s>=0)e.css("top",s);else if(s>t)e.css("top",t);else e.css("top",0);e.css("left",-6);$(window).bind("mouseup",function(){var n=100-Math.round(s/t*100);if(n>100)n=100;else if(n<0)n=0;e.css("bottom",n+"%");e.css("left",-6);$(window).unbind("mousemove")})})});$(".window .close").on("click",function(){$(this).parentsUntil(".window").parent().fadeOut(150)});$(".window.movable").drags({handle:".titleBar"});var e=$(".table").stupidtable();e.bind("aftertablesort",function(e,t){var n=$(this).find("th");n.find(".downArrow, .upArrow, .leftArrow, .rightArrow").remove();var r=t.direction==="asc"?"up":"down";n.eq(t.column).append('<span class="'+r+'Arrow"></span>')});$(".accordion .itemHead span").on("click",function(){$(this).toggleClass("rightArrow downArrow");$(this).parentsUntil("itemHead").parent().next().slideToggle(150)});$(".file input[type=file]").on("change",function(){var e=$(this).val();$(this).parent().find("input[type=text]").attr("value",e)})});(function(e){e.fn.drags=function(t){t=e.extend({handle:"",cursor:"move"},t);if(t.handle==="")var n=this;else var n=this.find(t.handle);return n.css("cursor",t.cursor).on("mousedown",function(n){if(t.handle==="")var r=e(this).addClass("draggable");else var r=e(this).addClass("active-handle").parent().addClass("draggable");var i=r.css("z-index"),s=r.outerHeight(),o=r.outerWidth(),u=r.offset().top+s-n.pageY,a=r.offset().left+o-n.pageX;r.css("z-index",1e3).parents().on("mousemove",function(t){var n=t.pageY+u-s;var r=t.pageX+a-o;e(".draggable").offset({top:n,left:r}).on("mouseup",function(){e(this).removeClass("draggable").css("z-index",i)})});n.preventDefault()}).on("mouseup",function(){if(t.handle==="")e(this).removeClass("draggable");else e(this).removeClass("active-handle").parent().removeClass("draggable")})}})(jQuery);(function(e){e.fn.stupidtable=function(t){return this.each(function(){var n=e(this);t=t||{};t=e.extend({},{"int":function(e,t){return parseInt(e,10)-parseInt(t,10)},"float":function(e,t){return parseFloat(e)-parseFloat(t)},string:function(e,t){if(e<t)return-1;if(e>t)return+1;return 0}},t);var r=function(e,t){return!!e&&!!t&&!(e<t||t<e)};var i=function(t,n){var r=t.slice(0).sort(n);var i=[];var s=0;for(var o=0;o<t.length;o++){s=e.inArray(t[o],r);while(e.inArray(s,i)!=-1){s++}i.push(s)}return i};var s=function(e,t){var n=e.slice(0),r=0;for(var i=0;i<t.length;i++){r=t[i];n[r]=e[i]}return n};var o=function(e,t){var n=e.slice(0);var i=e.slice(0).reverse();var s=e.slice(0).sort(t);return r(n,s)||r(i,s)};n.on("click","th",function(){var r=n.children("tbody").children("tr");var u=e(this);var a=0;n.find("th").slice(0,u.index()).each(function(){var t=e(this).attr("colspan")||1;a+=parseInt(t,10)});var f=u.data("sort")||null;if(f===null){return}var l=u.data("sort-dir")==="asc"?"desc":"asc";n.trigger("beforetablesort",{column:a,direction:l});setTimeout(function(){var c=[];var h=t[f];r.each(function(t,n){var r=e(n).children().eq(a);var i=r.data("sort-value");var s=typeof i!=="undefined"?i:r.text();c.push(s)});var p=[];var d=o(c,h);if(d&&u.data("sort-dir")){c.reverse();for(var v=c.length-1;v>=0;v--){p.push(v)}}else{p=i(c,h)}n.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc");u.data("sort-dir",l).addClass("sorting-"+l);var m=e(s(r,p));n.children("tbody").append(m);n.trigger("aftertablesort",{column:a,direction:l})},10)})})}})(jQuery)